<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="color-scheme" content="dark light" />
  <meta name="description" content="Crypto dashboard –≤ —Å—Ç–∏–ª–µ CoinGecko —Å CoinGecko API –∏ TradingView" />
  <title>Crypto Dashboard ‚Äî Market & Charts</title>
  <link rel="preconnect" href="https://api.coingecko.com" crossorigin />
  <link rel="preconnect" href="https://www.tradingview.com" crossorigin />
  <link rel="dns-prefetch" href="https://api.coingecko.com" />
  <link rel="dns-prefetch" href="https://www.tradingview.com" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" href="data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚Çø</text></svg>">
  <script>
    // Prevent FOUC: set theme early from localStorage
    (function() {
      try {
        const t = localStorage.getItem('theme') || 'dark';
        document.documentElement.dataset.theme = t;
      } catch (e) {}
    })();
  </script>
</head>
<body>
  <!-- Header -->
  <header class="app-header">
    <div class="header-left">
      <a href="#" class="logo" aria-label="Home">
        <span class="logo-mark">‚Çø</span>
        <span class="logo-text">CryptoHub</span>
      </a>
      <nav class="main-nav" aria-label="Primary">
        <button class="nav-btn active" data-view="market" id="navMarket">–†—ã–Ω–æ–∫</button>
        <button class="nav-btn" data-view="watchlist" id="navWatchlist">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</button>
        <button class="nav-btn" data-view="heatmap" id="navHeatmap">–¢–µ–ø–ª–æ–∫–∞—Ä—Ç–∞</button>
        <button class="nav-btn" data-view="global" id="navGlobal">–ì–ª–æ–±–∞–ª—å–Ω–æ</button>
      </nav>
    </div>

    <div class="header-right">
      <div class="search-wrap">
        <input type="search" id="searchInput" placeholder="–ü–æ–∏—Å–∫ –º–æ–Ω–µ—Ç—ã..." aria-label="Search coins" autocomplete="off" />
        <button id="clearSearch" title="–û—á–∏—Å—Ç–∏—Ç—å">‚úï</button>
      </div>

      <div class="filters-wrap">
        <select id="currencySelect" aria-label="Currency">
          <option value="usd">USD</option>
          <option value="eur">EUR</option>
          <option value="rub">RUB</option>
          <option value="uah">UAH</option>
          <option value="ron">RON</option>
        </select>
        <select id="perPageSelect" aria-label="Per page">
          <option value="25">25</option>
          <option value="50" selected>50</option>
          <option value="100">100</option>
        </select>
        <select id="sortSelect" aria-label="Sort">
          <option value="market_cap_desc" selected>–ö–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è ‚Üì</option>
          <option value="market_cap_asc">–ö–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è ‚Üë</option>
          <option value="volume_desc">–û–±—ä–µ–º ‚Üì</option>
          <option value="volume_asc">–û–±—ä–µ–º ‚Üë</option>
          <option value="price_desc">–¶–µ–Ω–∞ ‚Üì</option>
          <option value="price_asc">–¶–µ–Ω–∞ ‚Üë</option>
          <option value="change_24h_desc">% 24—á ‚Üì</option>
          <option value="change_24h_asc">% 24—á ‚Üë</option>
        </select>
      </div>

      <div class="toggles-wrap">
        <button id="themeToggle" class="toggle-btn" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">üåì</button>
        <button id="langToggle" class="toggle-btn" title="Switch language">RU</button>
      </div>
    </div>
  </header>

  <!-- Subheader: global stats -->
  <section class="subheader">
    <div class="global-stat" id="globalMcap">
      <span class="label">–ì–ª–æ–±–∞–ª—å–Ω–∞—è –∫–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è:</span>
      <span class="value">‚Äî</span>
    </div>
    <div class="global-stat" id="globalVolume">
      <span class="label">–û–±—â–∏–π –æ–±—ä–µ–º 24—á:</span>
      <span class="value">‚Äî</span>
    </div>
    <div class="global-stat" id="btcDominance">
      <span class="label">–î–æ–º–∏–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å BTC:</span>
      <span class="value">‚Äî</span>
    </div>
    <div class="global-stat" id="marketTrend">
      <span class="label">–¢—Ä–µ–Ω–¥ —Ä—ã–Ω–∫–∞:</span>
      <span class="value trend-pill">‚Äî</span>
    </div>
    <div class="subheader-right">
      <button id="refreshBtn" class="refresh-btn">–û–±–Ω–æ–≤–∏—Ç—å</button>
      <span class="last-updated" id="lastUpdated">‚Äî</span>
    </div>
  </section>

  <!-- Main content -->
  <main class="app-main">
    <!-- Market view -->
    <section id="marketView" class="view active" aria-labelledby="navMarket">
      <div class="table-wrap">
        <table class="coins-table" aria-describedby="marketInfo">
          <caption id="marketInfo">–†—ã–Ω–æ–∫ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç. –ö–ª–∏–∫–∞–π—Ç–µ –Ω–∞ –º–æ–Ω–µ—Ç—ã –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π –∏ –≥—Ä–∞—Ñ–∏–∫–∞.</caption>
          <thead>
            <tr>
              <th class="sticky-col">#</th>
              <th class="sticky-col">–ú–æ–Ω–µ—Ç–∞</th>
              <th>–¶–µ–Ω–∞</th>
              <th>–ò–∑–º. 24—á</th>
              <th>–ö–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è</th>
              <th>–û–±—ä–µ–º 24—á</th>
              <th>–û–±–æ—Ä–æ—Ç</th>
              <th>–õ–∏–Ω–∏—è</th>
              <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
          </thead>
          <tbody id="coinsTbody">
            <!-- Rows injected by JS -->
          </tbody>
        </table>
      </div>

      <div class="pagination">
        <button id="prevPage" class="page-btn">‚Üê</button>
        <span id="pageIndicator">Page 1</span>
        <button id="nextPage" class="page-btn">‚Üí</button>
      </div>
    </section>

    <!-- Watchlist view -->
    <section id="watchlistView" class="view" aria-labelledby="navWatchlist">
      <div class="empty-state" id="watchlistEmpty">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ –ø—É—Å—Ç–æ. –î–æ–±–∞–≤—å—Ç–µ –º–æ–Ω–µ—Ç—ã —Å —Ä—ã–Ω–∫–∞.</div>
      <div class="cards-grid" id="watchlistGrid"></div>
    </section>

    <!-- Heatmap view -->
    <section id="heatmapView" class="view" aria-labelledby="navHeatmap">
      <div class="heatmap-legend">
        <span>24—á % ‚Üí —Ü–≤–µ—Ç</span>
        <span class="legend green">—Ä–æ—Å—Ç</span>
        <span class="legend red">–ø–∞–¥–µ–Ω–∏–µ</span>
      </div>
      <div class="heatmap-grid" id="heatmapGrid"></div>
    </section>

    <!-- Global view -->
    <section id="globalView" class="view" aria-labelledby="navGlobal">
      <div class="global-cards">
        <div class="global-card">
          <h3>–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏</h3>
          <ul id="globalMetrics">
            <!-- Filled by JS -->
          </ul>
        </div>
        <div class="global-card">
          <h3>–¢—Ä–µ–∫–µ—Ä –¥–æ–º–∏–Ω–∞–Ω—Ç–Ω–æ—Å—Ç–∏</h3>
          <div id="dominanceBars" class="dominance-bars">
            <!-- Bars -->
          </div>
        </div>
        <div class="global-card">
          <h3>–¢–æ–ø –ø–æ –æ–±—ä–µ–º—É</h3>
          <ol id="topVolumeList">
            <!-- List -->
          </ol>
        </div>
      </div>
    </section>
  </main>

  <!-- Side panel chart -->
  <aside class="chart-panel" id="chartPanel" aria-live="polite">
    <div class="chart-header">
      <div class="chart-coin">
        <img id="chartCoinIcon" alt="" />
        <div>
          <div id="chartCoinName" class="coin-name">‚Äî</div>
          <div id="chartCoinSymbol" class="coin-symbol">‚Äî</div>
        </div>
      </div>
      <div class="chart-actions">
        <button id="chartClose" title="–ó–∞–∫—Ä—ã—Ç—å –ø–∞–Ω–µ–ª—å">‚úï</button>
      </div>
    </div>

    <div class="chart-tabs">
      <button class="chart-tab active" data-tab="spark">–õ–∏–Ω–∏—è</button>
      <button class="chart-tab" data-tab="tv-mini">TradingView Mini</button>
      <button class="chart-tab" data-tab="tv-full">TradingView Full</button>
      <button class="chart-tab" data-tab="info">–ò–Ω—Ñ–æ</button>
    </div>

    <div class="chart-body">
      <div id="sparkTab" class="chart-tabpane active">
        <canvas id="sparkCanvas" width="400" height="180"></canvas>
      </div>
      <div id="tvMiniTab" class="chart-tabpane">
        <div id="tvMiniWidget" style="height: 400px;"></div>
      </div>
      <div id="tvFullTab" class="chart-tabpane">
        <div id="tvFullWidget" style="height: 600px;"></div>
      </div>
      <div id="infoTab" class="chart-tabpane">
        <div class="info-grid" id="coinInfoGrid">
          <!-- Info items -->
        </div>
      </div>
    </div>
  </aside>

  <!-- Modal: coin details -->
  <div id="coinModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="coinModalTitle" aria-hidden="true">
    <div class="modal-backdrop"></div>
    <div class="modal-content" role="document">
      <div class="modal-header">
        <h2 id="coinModalTitle">–î–µ—Ç–∞–ª–∏ –º–æ–Ω–µ—Ç—ã</h2>
        <button id="modalClose" title="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="modal-coin-head">
          <img id="modalCoinIcon" alt="Coin icon" />
          <div class="modal-coin-meta">
            <div class="modal-coin-name" id="modalCoinName">‚Äî</div>
            <div class="modal-coin-symbol" id="modalCoinSymbol">‚Äî</div>
          </div>
          <button id="modalFavToggle" class="fav-btn">‚òÜ</button>
        </div>

        <div class="modal-sections">
          <section>
            <h3>–†—ã–Ω–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
            <ul class="kv-list" id="modalMarketData"></ul>
          </section>
          <section>
            <h3>–°—Å—ã–ª–∫–∏</h3>
            <ul class="links-list" id="modalLinksList"></ul>
          </section>
          <section>
            <h3>–û–ø–∏—Å–∞–Ω–∏–µ</h3>
            <div class="coin-description" id="modalDescription"></div>
          </section>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="app-footer">
    <div class="footer-left">
      <span>&copy; 2025 CryptoHub. –í–¥–æ—Ö–Ω–æ–≤–ª–µ–Ω–æ CoinGecko.</span>
      <span>–î–∞–Ω–Ω—ã–µ: CoinGecko API. –ß–∞—Ä—Ç—ã: TradingView.</span>
    </div>
    <div class="footer-right">
      <a href="https://www.coingecko.com/en/api/documentation" target="_blank" rel="noopener">CoinGecko API</a>
      <a href="https://www.tradingview.com/widget/" target="_blank" rel="noopener">TradingView Widgets</a>
      <a href="https://github.com/" target="_blank" rel="noopener">GitHub Pages</a>
    </div>
  </footer>

  <!-- TradingView script -->
  <script src="https://s3.tradingview.com/tv.js"></script>
  <!-- App script -->
  <script src="script.js"></script>
</body>
</html>
